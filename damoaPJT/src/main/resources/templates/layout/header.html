<!DOCTYPE html>
<html
  lang="kor"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
>
  <head>
    <meta charset="UTF-8" />
    <title>Title</title>
  </head>
  <body>
    <header
      id="header"
      class="header fixed-top d-flex align-items-center"
      th:fragment="header"
    >
      <div class="d-flex align-items-center justify-content-between">
        <a href="/" class="logo d-flex align-items-center">
          <img src="/assets/img/DamoaLogo.png" alt="" />
          <span class="d-none d-lg-block">DAMOA</span>
        </a>
        <i class="bi bi-list toggle-sidebar-btn"></i>
      </div>

      <!-- 검색 시작 -->
      <div class="search-bar">
        <form
          class="search-form d-flex align-items-center"
          method="GET"
          action="/search"
        >
          <input
            type="text"
            name="search"
            placeholder="검색"
            autocomplete="off"
            title="키워드를 입력하세요."
          />
          <button type="submit" title="검색">
            <i class="bi bi-search"></i>
          </button>
        </form>
      </div>

      <nav class="header-nav ms-auto">
        <ul class="d-flex align-items-center">
          <li class="nav-item d-block d-lg-none">
            <a class="nav-link nav-icon search-bar-toggle" href="#">
              <i class="bi bi-search"></i>
            </a>
          </li>
          <!-- 검색 끝 -->

          <!-- 채팅 시작 -->
          <li class="nav-item">
            <a class="nav-link nav-icon" href="/chat">
              <i class="bi bi-chat-left-text"></i> </a
            >
          </li>
          <!-- 채팅 끝 -->

          <!-- 상단바 프로필 시작 -->
          <li class="nav-item dropdown pe-3">
            <a
              class="nav-link nav-profile d-flex align-items-center pe-0"
              href="#"
              data-bs-toggle="dropdown"
            >
              <img
                src="/assets/img/profile-img.png"
                alt="Profile"
                class="rounded-circle"
              />
              <span
                id="userNick"
                class="d-none d-md-block dropdown-toggle ps-2"
                sec:authentication="principal.userNickname"
              ></span>
              <input
                type="hidden"
                id="userNo"
                th:value="${#authentication.principal.userNo}"
              />
            </a>

            <ul
              class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile"
            >
              <li>
                <a
                  class="dropdown-item d-flex align-items-center"
                  href="/userDetail"
                >
                  <i class="bi bi-person"></i>
                  <span>마이페이지</span>
                </a>
              </li>
              <li>
                <hr class="dropdown-divider" />
              </li>

              <li>
                <a
                  class="dropdown-item d-flex align-items-center"
                  href="/logout"
                >
                  <i class="bi bi-box-arrow-right"></i>
                  <span>로그아웃</span>
                </a>
              </li>
            </ul>
          </li>
          <!-- 상단바 프로필 끝 -->
        </ul>
      </nav>
    </header>
  </body>
</html>
